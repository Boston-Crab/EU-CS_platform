{% extends "base_r2.html" %}
{% load staticfiles %}
{% load crispy_forms_tags %}
{% load i18n %}
{% load leaflet_tags %}
{% block head %}
{{block.super }}
{% leaflet_js %}
{% leaflet_css %}
<meta name="Description" content="Citizen Science in Europe, projects, resources, events">
{% endblock %}
{% block navbar-left %}
{% include "_navbar_r2.html"  %}
{% endblock %}
{% block splash %}
<script src="https://unpkg.com/leaflet.markercluster@1.4.1/dist/leaflet.markercluster.js"></script>
<link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.4.1/dist/MarkerCluster.css">
<link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.4.1/dist/MarkerCluster.Default.css">

{% if request.get_full_path == "/" %}
<div class="jumbotron jumbotron-fluid jumbotron-main mb-0">
	<div class="container">
		<h1 class=" mt-5 text-white display-4 mb-2">Welcome to EU-Citizen.Science<br></h1>
		<h4 class="text-white mb-5"> The platform for sharing knowledge, tools, training, and resources for Citizen Science</h4>
		<form id="finder" action="/all" >
			<div class="form-row">
				<div class="input-group">
					<div class="input-group-prepend clickable">
						<div class="input-group-text inhead clickable" id="mysearch"> <i class="fas fa-search"></i></div>
					</div>
					<input type="text" id="keywords" name="keywords" autocomplete="off"
					class="basicAutoComplete form-control form-control-lg inhead"
					placeholder="Search for citizen science resources, projects, tools, training, and more...."
					data-url="home_autocomplete/">
					<div class="input-group-append">
						<div class="input-group-text inhead clickable" id="backsign"></div>
					</div>
				</div>
			</div>
		</form>
		<!--h4 class="mt-4 white">Join the community to share your favourite citizen science resources, profile your own citizen science projects, and more. </h4-->
	</div>
</div>
{% endif %}
{% endblock splash %}
{% block page_header %}
{% include "finder_all.html" %}
{% endblock page_header %}
{% block list_of_items %}


<div class="container">
	<div class="row">
		{% if counterprojects > 0 %}
		<div class="col-12 mb-2">
			{{ counterprojects }} result{% if counterprojects != 1 %}s{% endif %} in projects
			{% if counterprojects > 6 %}, click <a href="/projects">here</a> to see all of them {% endif %}
		</div>
		{% endif %}
		{% include "projects_cards.html" %}
		<div class="col-12 mb-2">
			{{ counterresources }} result{% if counterresources != 1 %}s{% endif %} in resources,
			{% if counterresources > 6 %}click <a href="/resources">here</a> to see all of them{% endif %}
		</div>
		{% include "resources_cards.html" %}
		<div class="col-12 mb-2">
			{{ countertresources }} result{% if counterresources != 1 %}s{% endif %} in training,
			{% if countertresources > 6 %}click <a href="/training_resources">here</a> to see all of them{% endif %}
		</div>
		{% include "resources_cards.html" with resources=tresources %}

		<div class="col-12 mb-2">
			{{ counterorganisations}} result{% if counterorganisations != 1 %}s{% endif %} in organisations,
			{% if counterorganisations > 6 %}click <a href="/training_resources">here</a> to see all of them{% endif %}

		</div>
		{% include "organisations_cards.html" %}
		<div class="col-12">&nbsp;</div>
	</div>
</div>
{% endblock list_of_items %}

{% block scripts %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.15.0/umd/popper.js"
integrity="sha256-7BfFV/dSvQT4pGBvRAIt6JDXsehb92DQqpGUndLCPQ4=" crossorigin="anonymous"></script>
<script
src="https://cdn.rawgit.com/xcash/bootstrap-autocomplete/3de7ad37/dist/latest/bootstrap-autocomplete.js"></script>
<script>
	$('#mysearch').click(function(){
		$('#finder').submit();
	});
	$('#backsign').click(function(){
		$('#keywords').val('');
		$('#backsign').html('')
	});

	$('.basicAutoComplete').keyup(function(){
		if(($(".basicAutoComplete").val().length)>0){
			$('#backsign').html('<i class="fas fa-backspace"></i>')
		}else{
			$('#backsign').html('')
		}
	});

	$('.basicAutoComplete').autoComplete(
	{ minLength: 3 }
	);
	$('.basicAutoComplete').on('autocomplete.select', function (evt, item) {
		$('#finder').submit();
	});
</script>
{% endblock scripts %}
