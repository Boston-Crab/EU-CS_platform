{% load staticfiles %}
{% load i18n %}
{% load l10n %}
{% load thumbnail %}
{% for resource in resources  %}
<div class="col-lg-4 col-md-6 col-xs-12 mb-5">
  <div class="card h-100 shadow border-0 text-center">
    <a class="card-img-wrap" href="{% if isTrainingResource %}/training_resource/{{resource.id}}{% else %}/resource/{{resource.id}}{% endif %}">
        {% if resource.image1 %}
      <img class="img-fluid img-zoom img-zoom lazyload" src="{% thumbnail resource.image1 600x400 crop %}" />
      {% endif %}
      <div class="upper">
        {% if resource.hidden or resource.id in unApprovedResources %}<a class="badge frontpage frontpage-red mb-2" href="/faq#moderation">{% trans "NOT ACCEPTED" %}</a><br/>
        {% else %} {% if resource.id not in approvedResources %} <a class="badge frontpage frontpage-red mb-2" href="/faq#moderation">{% trans "NOT YET MODERATED" %}</a><br/>
        {% else %} {% if filters.approvedCheck == "All" %}  <a class="badge frontpage frontpage-green mb-2" href="/faq#moderation">{% trans "MODERATED" %}</a><br/>{% endif %}
        {% endif %}{% endif %}
        {% get_language_info_list for LANGUAGES as languages %}
        {% for language in languages %}
        {% if language.code == resource.inLanguage %}
        <a class="badge badge-dark" href="/resources?language={{resource.inLanguage}}">{{language.name | upper}}</a><br/>
        {% endif %}
        {% endfor %}
      </div>
    </a>

    <div class="card-body">
      <h6 class="card-title">
        <a class="card-link"
        href="{% if isTrainingResource %}/training_resource/{{resource.id}}{% else %}/resource/{{resource.id}}{% endif %}"
        class="card-link">{{ resource.name | upper| truncatewords:12 }}</a></h6>
        <a class="badge badge-warning pt-1" href="/resources?category={{resource.category.id}}">{{ resource.category | upper }}</a><br>
        {% for theme in resource.theme.all %}
        <!-- TODO: Improve this or put in a template -->
        {% if forloop.counter < 4 %}
        <a class="badge badge-primary pt-1" href="/resources?theme={{theme.id}}">{{ theme | upper }}</a>
        {% elif forloop.counter < 5 %}
        ...
        {% endif %}
        {% endfor %}<br>
        {% for keyword in resource.keywords.all %} 
        {% if forloop.counter < 4 %}
        <a class="badge  badge-info pt-1" href="/resources?keywords={{keyword}}">{{keyword | upper }}</a>
        {% elif forloop.counter < 5 %}
        ...
        {% endif %}
        {% endfor %}
        <p class="mt-4">{{ resource.abstract | safe | truncatewords_html:30 }}</p>

      </div><!-- end of card-body -->
    </div><!-- end of card -->
  </div>
  {% endfor %}
  {% if 'resources' in request.get_full_path %}
  <div class="col-lg-12">
    {% include "fr2.html" %}
  </div>
  {% endif %}
