{% load staticfiles %}
<div class="row">
	<div class="col-lg-2">
		<h3>Projects</h3>
	</div>
	<div class="col-lg-10">
		<form class="form-inline float-lg-right" id="searchProjects" action="{% url 'projects' %}">
			<div class="my-0 mr-2">
				<!--label for="keywords" style="color:black">Keywords</label-->
				<input type="text" id="keywords" name="keywords" autocomplete="on" value="{{filters.keywords}}" class="basicAutoComplete form-control" placeholder="Keywords, project name" data-url="text_autocomplete/">
			</div>
			<div class="md-form my-0 ml-2">
				<!--label for="topic" style="color:black">Topic:</label-->
				<select id="topic" name="topic" class="custom-select form-control">
					<option value="">Topic</option>
					{% for topic in topics %}                
					<option {% if topic.topic ==  filters.topic %} selected {% endif %} value="{{topic}}">
					{{topic|capfirst}}
					</option>
					{% endfor %}
				</select>
				<!--label for="status" style="color:black">Status:</label-->
				<select id="status" name="status" class="custom-select status-select form-control">
					<option value="">Status<option>
					{% for s in status %}
					<option {% if s.id ==  filters.status %} selected {% endif %} value="{{s.id}}">
					{{s.status|capfirst}}
					</option>
					{% endfor %}
				</select>
				<!-- label for="host" style="color:black">Host</label-->
				<button class="btn btn-info" id="search" type="submit" alt="Find">
					<i class="fas fa-search"></i> Find
				</button>
				{% if user.is_authenticated %}
				<a class="btn btn-warning" href="{% url 'new_project' %}">
					<i class="fas fa-plus-circle"></i> Add
				</a>
				{% endif %}
			</div>
		</form>
	</div>
</div>

<script type="text/javascript" src="{% static 'site/js/jquery.min.js' %}"></script>
<script type="text/javascript" src="{% static 'site/js/bootstrap.min.js' %}"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.15.0/umd/popper.js"
integrity="sha256-7BfFV/dSvQT4pGBvRAIt6JDXsehb92DQqpGUndLCPQ4=" crossorigin="anonymous"></script>
<script
  src="https://cdn.rawgit.com/xcash/bootstrap-autocomplete/3de7ad37/dist/latest/bootstrap-autocomplete.js"></script>
<script>
  $('.basicAutoComplete').autoComplete(
    { minLength: 3 }
  );
  $(function () {
    $('#topic').on('change', function () {
      var topic = $(this).val();
      $('#searchProjects').submit();
    });
  });
  $(function () {
    $('.status-select').on('change', function () {
      var status = $(this).val();
      $('#searchProjects').submit();
    });
  });
  $("#keywords").blur(function () {
    $('#searchProjects').submit();
  });
  $("#host").blur(function () {
    $('#searchProjects').submit();
  });
</script>
