{% extends "base2.html" %}

{% load staticfiles %}
{% load crispy_forms_tags %}


{% block title %}{{ block.super }}Projects{% endblock %}

{% block navbar-left %}
{% include "_navbar.html" with active_link="projects" %}
{% endblock %}


{% block messages %}
{% if messages %}
{% for message in messages %}
<div class="main-content col-lg-10 col-md-9 col-sm-12 p-0 offset-lg-2 offset-md-3">
  <div class="alert alert-{{ message.tags }}">
    <a class="close" data-dismiss="alert">Ã—</a>
    {{ message|safe }}
  </div>
</div>
{% endfor %}
{% endif %}
{% endblock %}


{% block container %}
<br />
<br />
<br />
<br />
<br />
{% include "finder_projects.html" %}
<main class="main-content col-lg-12">
  <div class="main-content-container container">
    <div class="page-header row no-gutters">
      <div class="col-12 col-sm-4 text-center text-sm-left mb-0">
      </div>
    </div>
    <div class="row">
      {% for project in projects %}
      <div class="col-lg-4 col-md-6 col-sm-12 mb-4">
        <div class="card card-small card-post h-100">
          {% if project.image %} 
            <div class="card-post__image" style="background-image: url('{{ project.image }}');"></div>
          {% else %}
            <div class="card-post__image" style="background-image: url('static/site/img/project.png');"></div>
          {% endif %}

          <div class="card-body">
            <h4 class="card-title">
              {{ project.name }}
            </h4>
            <p class="card-text">{{project.description}}</p>
	    <a class="btn btn-outline-dark" href="{% url 'project' project.id %}">Read more</a>
          </div>
          <!--div class="card-footer text-muted border-top py-3">
            <span class="d-inline-block">By
              <a class="text-fiord-blue" href="#">{{project.creator.name}}</a>
            </span>
          </div-->
        </div>
      </div>
      {% endfor %}
    </div>

    <br /><br />
    {% include "paginator.html" %}
    {% if projects %}
    <span>
      Page {{ projects.number }} of {{ projects.paginator.num_pages }}.
    </span>
    {% endif %}

  </div>
</main>

{% endblock container %}


{% block scripts %}
<script src="{% static 'site/js/site.js' %}"></script>

<script
  src="https://cdn.rawgit.com/xcash/bootstrap-autocomplete/3de7ad37/dist/latest/bootstrap-autocomplete.js"></script>
<script>
  $('.basicAutoComplete').autoComplete(
    { minLength: 1 }
  );
</script>
<script>
  $(function () {
    $('.topic-select').on('change', function () {
      var topic = $(this).val();
      $('#searchProjects').submit();
    });
  });
  $(function () {
    $('.status-select').on('change', function () {
      var status = $(this).val();
      $('#searchProjects').submit();
    });
  });
  $("#keywords").blur(function () {
    $('#searchProjects').submit();
  });
  $("#host").blur(function () {
    $('#searchProjects').submit();
  });
</script>
{% endblock scripts %}
