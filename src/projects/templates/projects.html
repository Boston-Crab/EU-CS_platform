{% extends "base2.html" %}

{% load staticfiles %}
{% load crispy_forms_tags %}
{% load leaflet_tags %}


{% block title %}{{ block.super }}Projects{% endblock %}

{% block navbar-left %}
{% include "_navbar.html" with active_link="projects" %}
{% endblock %}

{% block page_header %}
{% include "finder_projects.html" %}
{% endblock page_header %}
{% block messages %}
{% if messages %}
{% for message in messages %}
<div class="main-content col-lg-10 col-md-9 col-sm-12 p-0 offset-lg-2 offset-md-3">
  <div class="alert alert-{{ message.tags }}">
    <a class="close" data-dismiss="alert">Ã—</a>
    {{ message|safe }}
  </div>
</div>
{% endfor %}
{% endif %}
{% endblock %}
{% block list_of_items %}
{% for project in projects %}
<div class="col-lg-4 col-md-6 col-sm-12 mb-4">
	<div class="card">
		{% if project.image %} 
		<img class="img-fluid" src="{{ project.image }}" />
		{% else %}
		<img class="img-fluid" src="static/site/img/project.png" />
		{% endif %}

		<div class="card-body">
			<h4 class="card-title">
				{{ project.name }}
			</h4>
			<p class="card-text">{{project.description | truncatewords:12 }}</p>
			<button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal{{project.id}}">
				Read more 
			</button>	
			<!-- Modal -->
			<div class="modal bd-example-modal-xl" id="exampleModal{{project.id}}" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
				<div class="modal-dialog modal-xl" role="document">
					<div class="modal-content">
						<div class="modal-header">
							<h5 class="modal-title" id="exampleModalLabel">{{project.name}}</h5>
							<button type="button" class="close" data-dismiss="modal" aria-label="Close">
							</button>
						</div>
						<div class="modal-body">
							<h5>Project info</h5>
							<b>Description: </b>{{project.description}}<br>
							<b>Keywords: </b>{{project.keywords}}<br>
							<b>Status: </b>{{project.status}}<br>
							<b>Host: </b>{{project.host}}<br>
							<b>Website: </b><a href="{{project.url}}" target="_blank">{{project.url}}</a><br>
							<h5>Geography</h5>
							<h5>Other info</h5>
							<b>How to participate: </b>{{project.howToParticipate}}<br>
							<b>Needed Equipment: </b>{{project.equipment}}
							</script>

						</div>
						<div class="modal-footer">
							<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
							<button type="button" class="btn btn-primary">Save changes</button>
						</div>
					</div>
				</div>
			</div>
			<!-- End modal -->
		</div>
	</div>
</div>
{% endfor %}
	<div class="col-lg-12">
		{% include "paginator.html" %}
</div>
{% endblock list_of_items %}
</main>
{% block scripts %}
<script
  src="https://cdn.rawgit.com/xcash/bootstrap-autocomplete/3de7ad37/dist/latest/bootstrap-autocomplete.js"></script>
<script>
  $('.basicAutoComplete').autoComplete(
    { minLength: 3 }
  );
</script>
<script>
  $(function () {
    $('.topic-select').on('change', function () {
      var topic = $(this).val();
      $('#searchProjects').submit();
    });
  });
  $(function () {
    $('.status-select').on('change', function () {
      var status = $(this).val();
      $('#searchProjects').submit();
    });
  });
  $("#keywords").blur(function () {
    $('#searchProjects').submit();
  });
  $("#host").blur(function () {
    $('#searchProjects').submit();
  });
</script>
{% endblock scripts %}
