{% load i18n %}
{% load staticfiles %}
{% load reviews %}
{% load thumbnail %}
{% for project in projects %}
<div class="col-lg-3 col-sm-6 col-12 mb-5">
    <div class="card h-100 shadow border-0">
        <img class="card-img" src="{% thumbnail project.image1|default:'void_600.png' 600x400 crop %}" />
        <div class="card-body">
            <h5 class="card-title">{{project.name | truncatewords:12 }}</h5>
            <!-- TODO: improve this loop -->
            {% for topic in project.topic.all %}
            {% if forloop.counter < 3 %}
            <a class="badge rounded-pill bg-dark text-decoration-none" 
               href="/projects?keywords=&topic={{topic|urlencode}}">{{topic}}</a>
            {% else %}
            {% if forloop.counter == 3 %}
            <button type="button" class="btn btn-secondary" data-bs-toggle="tooltip" data-bs-placement="left" title="Tooltip on leftia">
            {% endif %}
            {% if forlopp.counter >= 3 %}
               <a class="badge rounded-pill bg-dark text-decoration-none"
               href="/projects?keywords=&topic={{topic|urlencode}}">{{topic}}</a>
            {% endif %}
            {% endif %}
            {% endfor %}
            </button>
            {% for keyword in project.keywords.all %} 
            {% if forloop.counter < 3 %}
            <a class="badge rounded-pill bg-primary text-decoration-none"
               href="/projects?keywords={{keyword|urlencode}}">{{keyword}}
            </a>
            {% elif forloop.counter < 4 %}
            ...
            {% endif %}
            {% endfor %}
            <p class="mt-4">{{ project.description | safe| truncatewords_html:30 }}</p>
        </div><!-- End of card-body -->
    </div><!-- end of card -->
</div><!-- end of col -->
{% endfor %}
{% if 'projects' in request.get_full_path %}
<div class="col-lg-12">
    {% include "paginator.html" %}
</div>
{% endif %}
