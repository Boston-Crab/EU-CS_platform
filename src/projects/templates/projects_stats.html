<html>
	<body>
<script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.3/dist/Chart.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-colorschemes"></script>
<script src="https://cdn.jsdelivr.net/gh/emn178/chartjs-plugin-labels/src/chartjs-plugin-labels.js"></script>
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
<div id="regions_div" style="width: 900px; height: 500px;"></div>
<div id="donutchart" style="width: 900px; height: 800px;"></div>
<canvas id="pPerCountryChart" width="400" height="400"></canvas>
<canvas id="pPerTopicChart" width="400" height="400"></canvas>


<script>
  google.charts.load('current', {
        'packages':['geochart'],
        // Note: you will need to get a mapsApiKey for your project.
        // See: https://developers.google.com/chart/interactive/docs/basic_load_libs#load-settings
        'mapsApiKey': 'AIzaSyD-9tSrke72PouQMnMX-a7eZSW0jkFMBWY'
      });
      google.charts.setOnLoadCallback(drawRegionsMap);

      function drawRegionsMap() {
        var data = google.visualization.arrayToDataTable([
          ['Country', 'Popularity']
				{% for ppc in pPerCountry %}
								,['{{ppc.country}}', {{ppc.count}}]
					{% endfor %}
        ]);

        var options = {};

        var chart = new google.visualization.GeoChart(document.getElementById('regions_div'));

        chart.draw(data, options);
      }
google.charts.load("current", {packages:["corechart"]});
      google.charts.setOnLoadCallback(drawChart);
      function drawChart() {
        var data = google.visualization.arrayToDataTable([
          ['Task', 'Hours per Day']
				{% for ppc in pPerCountry %}
								,['{{ppc.country}}', {{ppc.count}}]
					{% endfor %}
        ]);

        var options = {
          title: 'My Daily Activities',
				  pieSliceText: 'label',
					sliceVisibilityThreshold: .014,
          pieHole: 0.4,
        };

        var chart = new google.visualization.PieChart(document.getElementById('donutchart'));
        chart.draw(data, options);
      } 

var ctx2 = document.getElementById('pPerTopicChart').getContext('2d');
var pPerTopicChar = new Chart(ctx2, {
    type: 'pie',
    data: {
	labels: [{% for ppt in pPerTopic %} "{{ppt.topic__topic}}", {% endfor%}],
        datasets: [{
            label: '# of projects by topic',
	    data: [{% for ppt in pPerTopic %} {{ppt.count}}, {% endfor %}],
        }]
    },
    options: {
	 plugins: {
            colorschemes: {
                scheme: 'tableau.HueCircle19'
            },
            labels: {
		    render: 'label',
		    position: 'outside'
	    }
        },
	cutoutPercentage: 50
    }
});

</script>
	</body>
